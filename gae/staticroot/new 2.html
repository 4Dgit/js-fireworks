<div id="timer"></div>
<script>
/*
	Title:	Lonon 2012 Olympic Countdown Timer
	Created: 12th July 2009
	Author: Andrew Mason 
    Contact: a.w.mason at gmail.com
    
    URL: http://analoguesignal.com/
    
	Version: 0.1
    
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
    
*/

/*
	Define object and namespace
*/
var countdownTimer = {
	target: Date.parse("Fri, 27 Jul 2012 07:00:00 GMT"),
	now: Date.parse("Fri, 13 Jul 2009 18:21:50 GMT"), // extract current date from DOM
    days_in_months: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
    getDateDiff: function() {
        var workDate = new Date(this.now);
        this.targetDate = new Date(this.target);
        var datediff = {
            secs:0,
            mins:0,
            hours:0,
            days:0,
            months:0,
            years:0
        };
        while (workDate.getSeconds() != this.targetDate.getSeconds()) {
            workDate = new Date(workDate.getTime() + 1 * 1000);
            datediff.secs += 1;
        }
        while (workDate.getMinutes() != this.targetDate.getMinutes()) {
            workDate = new Date(workDate.getTime() + 60 * 1000);
            datediff.mins += 1;
        }
        while (workDate.getHours() != this.targetDate.getHours()) {
            workDate = new Date(workDate.getTime() + 60 * 60 * 1000);
            datediff.hours += 1;
        }
        while (workDate.getDate() != this.targetDate.getDate()) {
            workDate = new Date(workDate.getTime() + 24 * 60 * 60 * 1000);
            datediff.days += 1;
        }
        while (workDate.getMonth() != this.targetDate.getMonth()) {
            console.log(workDate.getMonth());
            workDate.setMonth(workDate.getMonth()+1);
            datediff.months += 1;
        }
        console.log(workDate.getYear());
        console.log(this.targetDate.getYear());
        while (workDate.getYear() != this.targetDate.getYear()) {
            workDate.setYear(1900+workDate.getYear()+1);
            document.getElementById('timer').innerHTML = workDate.getMonth();
            datediff.years += 1;
        }
        document.getElementById('timer').innerHTML = datediff.years+'years '+datediff.months+'months '+datediff.days+'days '+datediff.hours+'hours '+datediff.mins+'mins '+datediff.secs+'secs';
        
        // quick hack based on JS time
        this.now = new Date();
    }
};


setInterval("countdownTimer.getDateDiff()", 1000);
</script>